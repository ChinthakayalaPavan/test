<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bingo Login</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
      padding: 20px;
      overflow: hidden;
    }

    /* Background Video */
    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      min-width: 100%;
      min-height: 100%;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    /* Title Logo */
    h1 {
      font-size: clamp(40px, 8vw, 80px);
      font-weight: 800;
      margin-bottom: 60px;
      text-transform: uppercase;
      letter-spacing: 3px;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.6);
      animation: bounce 1.5s ease forwards;
    }
    h1 span.orange {
      color: #b73105;
      animation: glow 1.5s infinite alternate;
    }
    h1 span.green {
      color: #b73105;
      animation: glow 1.5s infinite alternate;
    }

    @keyframes bounce {
      0% { transform: scale(0.5) translateY(-100px); opacity: 0; }
      50% { transform: scale(1.1) translateY(20px); opacity: 1; }
      70% { transform: scale(0.9) translateY(-10px); }
      100% { transform: scale(1) translateY(0); }
    }

    @keyframes glow {
      0% {
        text-shadow: 0 0 5px #fff, 0 0 5px currentColor, 0 0 5px currentColor;
      }
      100% {
        text-shadow: 0 0 20px #fff, 0 0 20px currentColor, 0 0 20px currentColor, 0 0 20px currentColor;
      }
    }

    .button-box {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 90%;
    }

    button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 30px;
      font-size: 18px;
      border: none;
      border-radius: 40px;
      cursor: pointer;
      transition: 0.3s;
      font-weight: bold;
      min-width: 230px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    .google-btn { background: #5f6368; color: white; }
    .google-btn:hover { background: #444; }

    .facebook-btn { background: #1877F2; color: white; }
    .facebook-btn:hover { background: #0d5bd9; }

    .guest-btn { background: #FF6B00; color: white; }
    .guest-btn:hover { background: #cc5500; }

    button img {
      width: 24px;
      height: 24px;
    }

    @media (max-width: 600px) {
      h1 { margin-bottom: 40px; }
      button {
        min-width: 180px;
        font-size: 16px;
        padding: 12px 20px;
      }
    }
  </style>
</head>
<body>

  <!-- Background Video -->
  <video autoplay muted loop id="bg-video">
    <source src="bingo.mp4" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>

  <footer style="text-align:center; padding: 15px; background:#111; color:#fff; position:fixed; bottom:0; width:100%;">
    <a href="privacy.html" style="color:#FFD700; margin:0 10px;">Privacy Policy</a> |
    <a href="refund.html" style="color:#FFD700; margin:0 10px;">Refund & Cancellation</a> |
    <a href="terms.html" style="color:#FFD700; margin:0 10px;">Terms & Conditions</a> |
    <a href="contact.html" style="color:#FFD700; margin:0 10px;">Contact Us</a>
  </footer>

  <!-- Background Music -->
  <audio id="bg-music" src="Drums-Of-Liberation.mp3" autoplay loop></audio>

  <!-- Title -->
  <h1>
    <span class="orange">I got</span> <span class="green">Bingo</span>
  </h1>

  <!-- Buttons -->
  <div class="button-box">
    <button class="google-btn" onclick="loginWithGoogle()">
      <img src="google.png" alt="Google Logo"> Sign in with Google
    </button>
    <button class="facebook-btn" onclick="loginWithFacebook()">
      <img src="facebook.png" alt="Facebook Logo"> Sign in with Facebook
    </button>
    <button class="guest-btn" onclick="playAsGuest()">Play as Guest</button>
  </div>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { 
    getAuth, 
    signInWithPopup, 
    GoogleAuthProvider, 
    FacebookAuthProvider, 
    onAuthStateChanged 
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB_v8PrYl2_3mUETzk-JYTxm3-YdE5FzE4",
    authDomain: "bingo-multiplayer-2b0de.firebaseapp.com",
    projectId: "bingo-multiplayer-2b0de",
    storageBucket: "bingo-multiplayer-2b0de.appspot.com",
    messagingSenderId: "363457734024",
    appId: "1:363457734024:web:56ddb17e0313fd8283463d"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // ✅ Always check login state on page load
  onAuthStateChanged(auth, (user) => {
    if (user) {
      console.log("User logged in:", user.email);

      // WebView deep link
      if (navigator.userAgent.includes("wv")) {
        window.location.href = "mywebapp://login-success";
      } else {
        window.location.href = "indexpage.html";
      }
    } else {
      console.log("No user, stay on login.html");
    }
  });

  window.playAsGuest = function() {
    window.location.href = "playguest.html";
  }

  window.loginWithGoogle = async function() {
    const provider = new GoogleAuthProvider();
    try {
      await signInWithPopup(auth, provider);
      // ✅ Redirect handled automatically by onAuthStateChanged
    } catch (error) {
      alert("Google login failed: " + error.message);
    }
  }

  window.loginWithFacebook = async function() {
    const provider = new FacebookAuthProvider();
    try {
      await signInWithPopup(auth, provider);
      // ✅ Redirect handled automatically by onAuthStateChanged
    } catch (error) {
      alert("Facebook login failed: " + error.message);
    }
  }

  // Fix autoplay music issue
  document.addEventListener("click", () => {
    const music = document.getElementById("bg-music");
    if (music.paused) {
      music.play().catch(() => {});
    }
  });
</script>

</body>
</html>

